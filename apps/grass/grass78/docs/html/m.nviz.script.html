<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>m.nviz.script - GRASS GIS manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="grassdocs.css" type="text/css">
</head>
<body bgcolor="white">
<div id="container">

<a href="index.html"><img src="grass_logo.png" alt="GRASS logo"></a>
<hr class="header">

<h2>NAME</h2>
<em><b>m.nviz.script</b></em>  - Creates fly-through script to run in NVIZ.
<h2>KEYWORDS</h2>
<a href="miscellaneous.html">miscellaneous</a>, <a href="topic_graphics.html">graphics</a>, <a href="keywords.html#raster">raster</a>, <a href="keywords.html#raster3d">raster3d</a>, <a href="keywords.html#vector">vector</a>, <a href="keywords.html#visualization">visualization</a>
<h2>SYNOPSIS</h2>
<div id="name"><b>m.nviz.script</b><br></div>
<b>m.nviz.script --help</b><br>
<div id="synopsis"><b>m.nviz.script</b> [-<b>fckoe</b>] <b>input</b>=<em>name</em> <b>output</b>=<em>name</em>  [<b>name</b>=<em>string</em>]   [<b>route</b>=<em>east,north</em>[,<i>east,north</i>,...]]  <b>dist</b>=<em>float</em> <b>ht</b>=<em>float</em> <b>frames</b>=<em>integer</em>  [<b>start</b>=<em>integer</em>]   [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>] 
</div>

<div id="flags">
<h3>Flags:</h3>
<dl>
<dt><b>-f</b></dt>
<dd>Full render -- Save images</dd>

<dt><b>-c</b></dt>
<dd>Fly at constant elevation (ht)</dd>

<dt><b>-k</b></dt>
<dd>Include command in the script to output a KeyFrame file</dd>

<dt><b>-o</b></dt>
<dd>Render images off-screen</dd>

<dt><b>-e</b></dt>
<dd>Enable vector and sites drawing</dd>

<dt><b>--overwrite</b></dt>
<dd>Allow output files to overwrite existing files</dd>
<dt><b>--help</b></dt>
<dd>Print usage summary</dd>
<dt><b>--verbose</b></dt>
<dd>Verbose module output</dd>
<dt><b>--quiet</b></dt>
<dd>Quiet module output</dd>
<dt><b>--ui</b></dt>
<dd>Force launching GUI dialog</dd>
</dl>
</div>

<div id="parameters">
<h3>Parameters:</h3>
<dl>
<dt><b>input</b>=<em>name</em>&nbsp;<b>[required]</b></dt>
<dd>Name of input raster map</dd>

<dt><b>output</b>=<em>name</em>&nbsp;<b>[required]</b></dt>
<dd>Name of output script</dd>

<dt><b>name</b>=<em>string</em></dt>
<dd>Prefix of output images (default = NVIZ)</dd>

<dt><b>route</b>=<em>east,north[,<i>east,north</i>,...]</em></dt>
<dd>Route coordinates (east,north)</dd>

<dt><b>dist</b>=<em>float</em>&nbsp;<b>[required]</b></dt>
<dd>Camera layback distance (in map units)</dd>

<dt><b>ht</b>=<em>float</em>&nbsp;<b>[required]</b></dt>
<dd>Camera height above terrain</dd>

<dt><b>frames</b>=<em>integer</em>&nbsp;<b>[required]</b></dt>
<dd>Number of frames</dd>

<dt><b>start</b>=<em>integer</em></dt>
<dd>Start frame number (default=0)</dd>

</dl>
</div>
<div class="toc">
<h4 class="toc">Table of contents</h4>
<ul class="toc">
    <li class="toc"><a href="#description" class="toc">DESCRIPTION</a></li>
    <li class="toc"><a href="#options" class="toc">OPTIONS</a>
    <ul class="toc">
        <li class="toc"><a href="#flags:" class="toc">Flags:</a></li>
        <li class="toc"><a href="#parameters:" class="toc">Parameters:</a></li>
    </ul></li>
    <li class="toc"><a href="#example" class="toc">EXAMPLE</a></li>
    <li class="toc"><a href="#notes-/-hints" class="toc">NOTES / HINTS</a>
    <ul class="toc">
        <li class="toc"><a href="#loading-the-script-into-nviz" class="toc">Loading the script into NVIZ</a></li>
        <li class="toc"><a href="#keyframe-animator-script" class="toc">Keyframe animator script</a></li>
    </ul></li>
    <li class="toc"><a href="#see-also" class="toc">SEE ALSO</a></li>
    <li class="toc"><a href="#author" class="toc">AUTHOR</a></li>
</ul>
</div>
<h2><a name="description">DESCRIPTION</a></h2>

The <em>m.nviz.script</em> program allows the user to easily create a script
that can be run in NVIZ to fly through a terrain.

The NVIZ flight path can be supplied on the command line as comma
separated coordinates. The program optionally allows a KeyFrame
file to created (after running the script). This KeyFrame file can
be loaded into the <em>Keyframe Animation</em> panel for fine
tuning or editing.

<p>The script generated by <em>m.nviz.script</em> can be run from the NVIZ
command line (nviz script=script_name) or after NVIZ is started by
selecting <em>Scripting->Play Script</em>.

<h2><a name="options">OPTIONS</a></h2>

<h3><a name="flags:">Flags:</a></h3>
<dl>
<dt><b>-f</b>
<dd>Full render
<dd>The script will draw all loaded NVIZ data and save scene to PPM image.
<dt><b>-c</b>
<dd>Flay at constant elevation
<dd>With this flag the camera will be set to an elevation given by the
	<em>ht=</em> parameter. The default is to fly at <em>ht=</em>
	above the topography (i.e. camera height = elevation + ht)
<dt><b>-k</b>
<dd>Output KeyFrame file
<dd>Generate a KeyFrame file that can be loaded from the NVIZ
	<em>Keyframe Animation</em> panel. The KeyFrame file is
	automatically assigned the script name with a
	<em>.kanimator</em> extension.
<dt><b>-o</b>
<dd>Render the animation in an off-screen context
<dt><b>-e</b>
<dd>Enable vector and sites drawing
</dl>


<h3><a name="parameters:">Parameters:</a></h3>
<dl>
<dt><b>input</b>
<dd>The name of the GRASS raster map with elevation data. 
<dd>This should be the same file that will be loaded in NVIZ.

<dt><b>output</b>
<dd>The name of the NVIZ script to create.

<dt><b>name</b>
<dd>The prefix for output images if running in full render mode (<em>-f</em>).
<dd>The defulat preifix is NVIZ (eg. NVIZ0000.ppm).

<dt><b>dist</b>
<dd>The distance of the camera behind the center of view.

<dt><b>ht</b>
<dd>The height of the camera above the center of view.
<dd>If the the <em>-c</em> flag is set, the height represents the actual camera height.

<dt><b>frames</b>
<dd>The number of frames in the animation.

<dt><b>start</b>
<dd>The starting frame number (default = 0).
<dd> This option may be useful in full render mode when creating an
animation in sections. For example the user may wish to start at frame
number 2000.

<dt><b>route</b>
<dd>The comma separated geographic coordinates for keyframe locations.

</dl>

<h2><a name="example">EXAMPLE</a></h2>
To interactively create an NVIZ animation from raster elev.rast with
500 frames and the camera set to 50 meters above and 250 meters behind
the scene, run the following:

<div class="code"><pre>
g.region raster=elevation.dem
d.rast elevation.dem
m.nviz.script -k input=elevation.dem output=nviz.script dist=2400 ht=1220 frames=1000
</pre></div>
In the above the example the user is prompted to select the route from the GRASS monitor.
The output script, 'nviz.script.nvscr', can then be run in NVIZ:
<div class="code"><pre>
nviz elevation=elevation.dem script=nviz.script.nvscr
</pre></div>

<h2><a name="notes-/-hints">NOTES / HINTS</a></h2>
The user must select at least four key-frame locations (points)
 otherwise an error is generated.
<p>If the GRASS region is changed the <em>m.nviz.script</em> command must be re-run.
<p>The current GRASS region and the user supplied parameters are included
as a comment at the top of the output script. This information can be
used to easily re-create the animation.
<p>The camera position is calculated backwards from the supplied
position(s). It is possible that the camera position will lie outside
the current window, in which case a non-fatal error is generated
(Error: selected point is outside region).  This error can result in
jerky movements during the animation.  To correct this problem reduce
the <em>dist=</em> parameter or increase the current region.

<h3><a name="loading-the-script-into-nviz">Loading the script into NVIZ</a></h3>

The user can run the script at arbitrary resolution. To re-run it at
higher spatial resolution or different settings, the user first loads
the surface and sets the resolution, lighting, etc. Then internally
the script generated by <em>m.nviz.script</em> is run. Alternatively, the
user can run nviz with a previuosly saved state and the
<em>m.nviz.script</em> generated script:

<div class="code"><pre>
nviz state=saved.state script=nviz.script.nvscr
</pre></div>

<h3><a name="keyframe-animator-script">Keyframe animator script</a></h3>
Running the script generated by <em>m.nviz.script</em> within NVIZ, a new script for
kanimator (keyframe animator) is created. The kanimator panel offers
fine tuning of the speed (frame rate) as well as editing individual
frames or inserting new frames. This new kanimator script has to be
loaded from the Kanimator panel in NVIZ. In the Kanimator panel there
are Save and Load button which allow the user to save and re-load a
kanimator script. Once loaded, the key frames will appear in the GUI
and can then be edited there.

<h2><a name="see-also">SEE ALSO</a></h2>

<em><a href="wxGUI.nviz.html">wxGUI 3D viewer (NVIZ)</a></em>

<h2><a name="author">AUTHOR</a></h2>

<a href="mailto:bcovill@tekmap.ns.ca">Bob Covill</a>
<!--
<p>
<i>Last changed: $Date$</i>
--><h2>SOURCE CODE</h2>
<p>Available at: <a href="https://github.com/OSGeo/grass/tree/master/misc/m.nviz.script">m.nviz.script source code</a> (<a href="https://github.com/OSGeo/grass/commits/master/misc/m.nviz.script">history</a>)</p>
<hr class="header">
<p>
<a href="index.html">Main index</a> |
<a href="miscellaneous.html">Miscellaneous index</a> |
<a href="topics.html">Topics index</a> |
<a href="keywords.html">Keywords index</a> |
<a href="graphical_index.html">Graphical index</a> |
<a href="full_index.html">Full index</a>
</p>
<p>
&copy; 2003-2020
<a href="http://grass.osgeo.org">GRASS Development Team</a>,
GRASS GIS 7.8.5 Reference Manual
</p>

</div>
</body>
</html>
